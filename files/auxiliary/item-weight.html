<!DOCTYPE html><html><head><meta charset="utf-8"><title>Item Weight - Auxiliary Docs | Factorio</title><link href="https://cdn.factorio.com/assets/fonts/titillium-web.css" rel="stylesheet"><link href="https://cdn.factorio.com/assets/fonts/roboto-mono.css" rel="stylesheet"><link href="../style.css?v=72ae9920" rel="stylesheet" type="text/css"><meta name="viewport" content="width=device-width"><link rel="shortcut icon" href="../static/favicon.png"><script src="../script.js?v=72ae9920"></script></head><body class="docs docs-wide"><div id="top" class="top-bar mb32"><div class="top-bar-inner"><div class="sites links flex flex-items-baseline" style="width: 100%"><span><a href="https://factorio.com" style="color: #7dcaed;">Factorio.com</a><span class="separator">|</span><a href="https://forums.factorio.com/" style="color: #7dcaed;">Forums</a><span class="separator">|</span><a href="https://wiki.factorio.com/" style="color: #7dcaed;">Wiki</a><span class="separator">|</span><a href="https://mods.factorio.com" style="color: #7dcaed;">Mod Portal</a><span class="separator">|</span><a href="../index.html" class="sites-current">API Docs</a></span><span style="margin-left: auto;"><a href="../index-prototype.html">Prototype</a><span class="separator">|</span><a href="../index-runtime.html">Runtime</a><span class="separator">|</span><a href="../index-auxiliary.html" class="sites-current">Auxiliary</a></span></div></div></div><div class="container"><div class="container-inner"><div id="auxiliary-page"></div> <h1 class="ml8 mr8" style="position: relative;"><a href="../index-auxiliary.html" style="color: #ffe6c0;">Factorio Auxiliary Docs</a><a href="/" class="version-link" style="color: #ffe6c0;"><span class="version-string">Version</span> 2.0.55 <img src="../static/collapse-symbol.png" class="collapse-icon"></a></h1><div id="docs-layout-panel" class="panel flex-column pb0 overflow-unset"><div class="flex flex-reverse docs-panes " style="margin-top: -12px;"><div class="docs-content flex flex-column"><div class="panel-inset breadcrumbs mb0 p4"><span class="breadcrumbs-text"><a href="../index-auxiliary.html">Home</a> / <a href>Item Weight</a></span><a id="page-width-button" class="button square-sm" style="float: right;">&gt;&lt;</a></div><div class="panel-inset-lighter" style="flex-grow: 1;"><h2 id="item-weight">Item Weight<a class="ml8 link" href="#item-weight"><img src="../static/link-symbol.png"></a></h2><p>An item's <a href="../prototypes/ItemPrototype.html#weight">weight</a> is used to determine how many of it will fit on a rocket to supply a space platform. It can either be set manually or be calculated automatically based on its recipe(s). This page describes the algorithm for this automatic calculation.</p><h3 id="algorithm">Algorithm<a class="ml8 link" href="#algorithm"><img src="../static/link-symbol.png"></a></h3><p>If an item has the <code>"only-in-cursor"</code> and <code>"spawnable"</code> <a href="../types/ItemPrototypeFlags.html">flags</a>, its weight will be <code>0</code>.</p><p>If an item has no recipe to produce it, it'll fall back to the <a href="../prototypes/UtilityConstants.html#default_item_weight">default item weight</a>.</p><p>The game starts by calculating the <em>'recipe weight'</em> of the item's recipe. If an item has multiple recipes, it picks the first recipe, according to the sorting described at the <a href="#recipe-ordering">bottom</a> of this page. The recipe weight is then calculated by iterating over all ingredients:</p><ul><li>For each item ingredient, the weight is increased by <code>item_weight * item_ingredient_count</code>. Note that to do this, it needs to determine the weight of all ingredients first. If this results in a recipe loop, it will fall back to the <a href="../prototypes/UtilityConstants.html#default_item_weight">default item weight</a> for that item.</li><li>For each fluid ingredient, the weight is increased by <code>fluid_ingredient_amount * 100</code>.</li></ul><p>If the resulting recipe weight is <code>0</code>, the item's weight will fall back to the <a href="../prototypes/UtilityConstants.html#default_item_weight">default item weight</a>.</p><p>The game then determines the <em>product count</em> of the recipe by iterating all products and adding up the expected (ie. after probabilities) count for all item products. Fluid products are skipped.</p><p>If the recipe's product count is <code>0</code>, the item's weight will fall back to the <a href="../prototypes/UtilityConstants.html#default_item_weight">default item weight</a>.</p><p>Next, an <em>intermediate result</em> will be determined as <code>(recipe_weight / product_count) * ingredient_to_weight_coefficient</code> (see <a href="../prototypes/ItemPrototype.html#ingredient_to_weight_coefficient">ingredient_to_weight_coefficient</a>, which defaults to <code>0.5</code>).</p><p>Following this, if a recipe doesn't support productivity, its <em>simple result</em> is determined as <code>rocket_lift_weight / stack_size</code> (see <a href="../prototypes/UtilityConstants.html#rocket_lift_weight">rocket_lift_weight</a> and <a href="../prototypes/ItemPrototype.html#stack_size">stack_size</a>). If this simple result is larger than or equal to the intermediate result, it becomes the item's weight.</p><p>Otherwise, the game determines the amount of stacks that would result from the intermediate result as <code>rocket_lift_weight / intermediate_result / stack_size</code>. If this amount is less than or equal to <code>1</code>, the intermediate result becomes the item's weight. Else, the item's weight is set to <code>rocket_lift_weight / floor(stack_amount) / stack_size</code>.</p><h3 id="example">Example<a class="ml8 link" href="#example"><img src="../static/link-symbol.png"></a></h3><p>This is an example of how the <code>electronic-circuit</code> item gets its weight. Note that because this algorithm has many branching paths, this one example doesn't cover all of them.</p><div class="codehilite" style="background: #263238"><pre style="line-height: 125%;"><span></span><code><span style="color: #546E7A; font-style: italic">-- the global default_item_weight is 100</span>
<span style="color: #546E7A; font-style: italic">-- the global rocket_lift_weight is 1000000</span>
<span style="color: #546E7A; font-style: italic">-- the item has an ingredient_to_weight_coefficient of 0.28</span>
</code></pre></div><p>The electronic circuit item has a recipe of the same name, which is thus used for calculating the item weight.</p><div class="codehilite" style="background: #263238"><pre style="line-height: 125%;"><span></span><code><span style="color: #546E7A; font-style: italic">-- electronic circuit recipe ingredients and weights</span>
<span style="color: #89DDFF">ingredients</span><span style="color: #EFF"> </span><span style="color: #89DDFF">=</span><span style="color: #EFF"> </span><span style="color: #89DDFF">{</span>
<span style="color: #EFF">    </span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">type</span><span style="color: #EFF"> </span><span style="color: #89DDFF">=</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&quot;item&quot;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #89DDFF">name</span><span style="color: #EFF"> </span><span style="color: #89DDFF">=</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&quot;iron-plate&quot;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #89DDFF">amount</span><span style="color: #EFF"> </span><span style="color: #89DDFF">=</span><span style="color: #EFF"> </span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">},</span><span style="color: #EFF">  </span><span style="color: #546E7A; font-style: italic">-- weight of 1000</span>
<span style="color: #EFF">    </span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">type</span><span style="color: #EFF"> </span><span style="color: #89DDFF">=</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&quot;item&quot;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #89DDFF">name</span><span style="color: #EFF"> </span><span style="color: #89DDFF">=</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&quot;copper-cable&quot;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #89DDFF">amount</span><span style="color: #EFF"> </span><span style="color: #89DDFF">=</span><span style="color: #EFF"> </span><span style="color: #F78C6C">3</span><span style="color: #89DDFF">}</span><span style="color: #EFF">  </span><span style="color: #546E7A; font-style: italic">-- weight of 250</span>
<span style="color: #89DDFF">}</span>
<span style="color: #546E7A; font-style: italic">-- the recipe&#39;s weight is thus: 1 * 1000 + 3 * 250 = 1750</span>

<span style="color: #546E7A; font-style: italic">-- electronic circuit recipe products</span>
<span style="color: #89DDFF">results</span><span style="color: #EFF"> </span><span style="color: #89DDFF">=</span><span style="color: #EFF"> </span><span style="color: #89DDFF">{</span><span style="color: #EFF"> </span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">type</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;item&quot;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #89DDFF">name=</span><span style="color: #C3E88D">&quot;electronic-circuit&quot;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #89DDFF">amount=</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">}</span><span style="color: #EFF"> </span><span style="color: #89DDFF">}</span>
<span style="color: #546E7A; font-style: italic">-- the recipe&#39;s product count is thus 1</span>
</code></pre></div><p>The recipe weight and product count is more than <code>0</code>, so we continue on.</p><p>The intermediate result is then determined to be <code>1750 / 1 * 0.28 = 490</code>.</p><p>The recipe supports productivity, so the simple result branch is skipped.</p><p>The stack count is determined to be <code>1000000 / 490 / 200 = 10.2</code>. This is bigger than <code>1</code>, so we continue on.</p><p>The final weight is thus determined to be <code>1000000 / floor(10.2) / 200 = 500</code>.</p><h3 id="recipe-ordering">Recipe Ordering<a class="ml8 link" href="#recipe-ordering"><img src="../static/link-symbol.png"></a></h3><p>Items can have multiple recipes to produce them. These recipes are ordered in a particular way to determine which one is used for determining item weight.</p><p>Note that recipes that are <a href="../prototypes/PrototypeBase.html#hidden">hidden</a> or don't <a href="../prototypes/RecipePrototype.html#allow_decomposition">allow_decomposition</a> are not considered for this use case.</p><p>The sorting works by considering the following attributes in order, preferring recipes that fulfill them:</p><ul><li>The name of the recipe is identical to the item name.</li><li>The recipe is <em>not</em> using the item as a catalyst.</li><li>The recipe can be used as an <a href="../prototypes/RecipePrototype.html#allow_as_intermediate">intermediate</a> while hand-crafting.</li><li>The recipe's <a href="../prototypes/RecipePrototype.html#category">category</a>, <a href="../prototypes/PrototypeBase.html#subgroup">subgroup</a>, then <a href="../prototypes/PrototypeBase.html#order">order</a>.</li></ul> </div></div><div class="docs-sidebar mr12 flex-column fs0"><div class="panel-inset breadcrumbs mb0 p4"><span class="breadcrumbs-text"><a href="../defines.html" class="category-link" data-view="list-defines">Defines</a></span><a id="hide-sidebar-button" class="button square-sm" style="float: right;">|&lt;</a></div><div class="panel-inset mb0 fs0 p4 flex"><input id="ref-search" type="text" class="w100p" placeholder="Search..." spellcheck="false"></div><div id="docs-sidebar-list" class="panel-inset-lighter mt0 p2 docs-sidebar-list h100"><h2 class="ml8 mt8 mb0 yellow">General Topics</h2><ul class="panel-hole" id="list-general"><li data-name="Data Lifecycle"><a href="data-lifecycle.html">Data Lifecycle</a><li data-name="Storage"><a href="storage.html">Storage</a><li data-name="Migrations"><a href="migrations.html">Migrations</a><li data-name="Libraries"><a href="libraries.html">Libraries</a><li data-name="Prototype Inheritance Tree"><a href="prototype-tree.html">Prototype Inheritance Tree</a><li data-name="Noise Expressions"><a href="noise-expressions.html">Noise Expressions</a><li data-name="Instrument Mode"><a href="instrument.html">Instrument Mode</a><li data-name="Item Weight"><a href="item-weight.html" class="white strong">Item Weight</a></ul><h2 class="ml8 mt8 mb0 yellow">JSON Docs</h2><ul class="panel-hole" id="list-json"><li data-name="Runtime JSON Format"><a href="json-docs-runtime.html">Runtime JSON Format</a><li data-name="Prototype JSON Format"><a href="json-docs-prototype.html">Prototype JSON Format</a></ul><p><h2 class="ml8 mt8 mb0 yellow"><a class="collapse-link not-selectable" data-view="list-defines" data-collapsed="false"><img src="../static/collapse-symbol.png" class="collapse-icon" style="pointer-events: none;"><img src="../static/expand-symbol.png" class="expand-icon" style="pointer-events: none; display: none;"></a><a href="../defines.html"> Defines</a></h2><ul class="panel-hole" id="list-defines"><li data-name="alert_type"><a href="../defines.html#defines.alert_type">alert_type</a><li data-name="behavior_result"><a href="../defines.html#defines.behavior_result">behavior_result</a><li data-name="build_check_type"><a href="../defines.html#defines.build_check_type">build_check_type</a><li data-name="build_mode"><a href="../defines.html#defines.build_mode">build_mode</a><li data-name="cargo_destination"><a href="../defines.html#defines.cargo_destination">cargo_destination</a><li data-name="chain_signal_state"><a href="../defines.html#defines.chain_signal_state">chain_signal_state</a><li data-name="chunk_generated_status"><a href="../defines.html#defines.chunk_generated_status">chunk_generated_status</a><li data-name="command"><a href="../defines.html#defines.command">command</a><li data-name="compound_command"><a href="../defines.html#defines.compound_command">compound_command</a><li data-name="control_behavior"><a href="../defines.html#defines.control_behavior">control_behavior</a><li data-name="controllers"><a href="../defines.html#defines.controllers">controllers</a><li data-name="deconstruction_item"><a href="../defines.html#defines.deconstruction_item">deconstruction_item</a><li data-name="default_icon_size"><a href="../defines.html#defines.default_icon_size">default_icon_size</a><li data-name="difficulty"><a href="../defines.html#defines.difficulty">difficulty</a><li data-name="direction"><a href="../defines.html#defines.direction">direction</a><li data-name="disconnect_reason"><a href="../defines.html#defines.disconnect_reason">disconnect_reason</a><li data-name="distraction"><a href="../defines.html#defines.distraction">distraction</a><li data-name="entity_status"><a href="../defines.html#defines.entity_status">entity_status</a><li data-name="entity_status_diode"><a href="../defines.html#defines.entity_status_diode">entity_status_diode</a><li data-name="events"><a href="../defines.html#defines.events">events</a><li data-name="flow_precision_index"><a href="../defines.html#defines.flow_precision_index">flow_precision_index</a><li data-name="game_controller_interaction"><a href="../defines.html#defines.game_controller_interaction">game_controller_interaction</a><li data-name="group_state"><a href="../defines.html#defines.group_state">group_state</a><li data-name="gui_type"><a href="../defines.html#defines.gui_type">gui_type</a><li data-name="input_action"><a href="../defines.html#defines.input_action">input_action</a><li data-name="input_method"><a href="../defines.html#defines.input_method">input_method</a><li data-name="inventory"><a href="../defines.html#defines.inventory">inventory</a><li data-name="logistic_member_index"><a href="../defines.html#defines.logistic_member_index">logistic_member_index</a><li data-name="logistic_mode"><a href="../defines.html#defines.logistic_mode">logistic_mode</a><li data-name="logistic_section_type"><a href="../defines.html#defines.logistic_section_type">logistic_section_type</a><li data-name="mouse_button_type"><a href="../defines.html#defines.mouse_button_type">mouse_button_type</a><li data-name="moving_state"><a href="../defines.html#defines.moving_state">moving_state</a><li data-name="print_skip"><a href="../defines.html#defines.print_skip">print_skip</a><li data-name="print_sound"><a href="../defines.html#defines.print_sound">print_sound</a><li data-name="prototypes"><a href="../defines.html#defines.prototypes">prototypes</a><li data-name="rail_connection_direction"><a href="../defines.html#defines.rail_connection_direction">rail_connection_direction</a><li data-name="rail_direction"><a href="../defines.html#defines.rail_direction">rail_direction</a><li data-name="rail_layer"><a href="../defines.html#defines.rail_layer">rail_layer</a><li data-name="relative_gui_position"><a href="../defines.html#defines.relative_gui_position">relative_gui_position</a><li data-name="relative_gui_type"><a href="../defines.html#defines.relative_gui_type">relative_gui_type</a><li data-name="render_mode"><a href="../defines.html#defines.render_mode">render_mode</a><li data-name="rich_text_setting"><a href="../defines.html#defines.rich_text_setting">rich_text_setting</a><li data-name="riding"><a href="../defines.html#defines.riding">riding</a><li data-name="robot_order_type"><a href="../defines.html#defines.robot_order_type">robot_order_type</a><li data-name="rocket_silo_status"><a href="../defines.html#defines.rocket_silo_status">rocket_silo_status</a><li data-name="selection_mode"><a href="../defines.html#defines.selection_mode">selection_mode</a><li data-name="shooting"><a href="../defines.html#defines.shooting">shooting</a><li data-name="signal_state"><a href="../defines.html#defines.signal_state">signal_state</a><li data-name="space_platform_state"><a href="../defines.html#defines.space_platform_state">space_platform_state</a><li data-name="target_type"><a href="../defines.html#defines.target_type">target_type</a><li data-name="train_state"><a href="../defines.html#defines.train_state">train_state</a><li data-name="transport_line"><a href="../defines.html#defines.transport_line">transport_line</a><li data-name="wire_connector_id"><a href="../defines.html#defines.wire_connector_id">wire_connector_id</a><li data-name="wire_origin"><a href="../defines.html#defines.wire_origin">wire_origin</a><li data-name="wire_type"><a href="../defines.html#defines.wire_type">wire_type</a></ul></div></div><div class="docs-sidebar-thin mr8 flex-column" style="margin-top: 20px;"><a id="show-sidebar-button" class="button square-sm ml0">&gt;|</a></div></div></div></div></div><div class="footer"><div class="panel"><div class="panel-inset m0 text-center"> Copyright © Wube Software <span class="separator">|</span><a href="../license.html">License</a><span class="separator">|</span><a href="../static/archive.zip">Download</a><span class="separator">|</span><a href="https://forums.factorio.com/viewforum.php?f=233" target="_blank">Feedback</a></div></div></div></body></html>